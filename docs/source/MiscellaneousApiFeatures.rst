Дополнительные функции API
==========================

Ниже дан краткий обзор функций API, не упомянутых в предыдущих разделах. Более полную информацию по всем методам и структурам данных Diadoc API можно найти в технической документации.

Отправка заявления участника ЭДО
--------------------------------

При помощи метода :doc:`http/SendFnsRegistrationMessage` можно отправить заявление участника ЭДО.

Поиск контрагентов
------------------

Метод :doc:`http/GetOrganizationsByInnKpp` позволяет искать в Диадоке ящики по ИНН и КПП организаций, которым они принадлежат.

Метод *GetOrganizationsByInnKpp* возвращает список организаций и ящиков, удовлетворяющих критерию поиска, в виде структуры данных :doc:`OrganizationList <proto/Organization>`.

При помощи метода :doc:`http/GetBox` можно по идентификатору ящика получить информацию об организации, которой он принадлежит.

При помощи метода :doc:`http/GetOrganization` можно по идентификатору организации узнать различные справочные данные, заведенные в Диадок, такие как ИНН, КПП, название, а также получить список ее ящиков.

.. _drafts-info:

Черновики
---------

Черновик — это неотправленный и неподписанный документ в ящике организации-отправителя в Диадоке. На основе черновика можно создать письмо. Черновик удаляется после создания на его основе письма, также его можно удалить вручную — такие черновики называются утилизированными.

Работа с черновиками может быть полезна, когда подготовкой документов занимается один человек, а правом подписи и отправки обладает другой.

*Методы для работы с черновиками:*

- :doc:`http/PostMessage` — создает черновик.
- :doc:`http/SendDraft` — отправляет черновик.
- :doc:`http/RecycleDraft` — удаляет неутилизированные черновики.

Подготовка печатных форм
------------------------

Для документов, передаваемых через Диадок, в формализованном не человекочитаемом виде, предусмотрена возможность получения их печатных форм.

В первую очередь, этот функционал предназначен для формирования печатных форм счетов фактур и всех служебных документов, предусмотренных порядком Минфина в ходе документооборота счетов-фактур. Печатные формы интересующих пользователя документов можно получить через API при помощи метода :doc:`http/GeneratePrintForm`.

Фильтрация списка документов
----------------------------

При помощи метода :doc:`http/GetDocuments`, можно быстро получать информацию о документах (например, о счетах-фактурах) в своем ящике, задавая различные критерии фильтрации документов.

Например, можно запросить список всех входящих счетов-фактур от заданного контрагента за определенный период. В ряде сценариев этот метод может оказаться более удобным по сравнению с механизмом получения новостей методами :doc:`http/GetNewEvents`, :doc:`http/GetEvent` и :doc:`http/GetMessage`.

Кроме того, есть возможность получить всю метаинформацию об отдельном документе, зная его идентификатор. Для этого предназначен метод :doc:`http/GetDocument`.